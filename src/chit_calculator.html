<!DOCTYPE html>
<html>
<head>
    <title>Chit Calculator</title>
    <style>
        body { font-family: Arial; max-width: 400px; margin: 50px auto; padding: 20px; }
        .input-group { margin: 10px 0; }
        label { display: inline-block; width: 120px; }
        input { width: 150px; padding: 5px; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; margin: 10px 0; }
        #result { background: #f9f9f9; padding: 15px; border: 1px solid #ddd; margin-top: 10px; }
    </style>
</head>
<body>
    <h2>Chit Calculator</h2>
    
    <div class="input-group">
        <label>Total Amount:</label>
        <input type="text" id="totalAmount" placeholder="1,00,000" onblur="formatIndianInput(this)" onfocus="removeCommas(this)">
    </div>
    
    <div class="input-group">
        <label>Members:</label>
        <input type="number" id="members" placeholder="10">
    </div>
    
    <div class="input-group">
        <label>Months:</label>
        <input type="number" id="months" placeholder="10">
    </div>
    
    <div class="input-group">
        <label>Bid Amount:</label>
        <input type="text" id="bidAmount" placeholder="5,000" onblur="formatIndianInput(this)" onfocus="removeCommas(this)">
    </div>
    
    <button onclick="calculate()">Calculate</button>
    
    <div id="result"></div>

    <script>
        function formatIndianNumber(num) {
            return new Intl.NumberFormat('en-IN').format(Math.round(num));
        }
        
        function formatIndianInput(input) {
            const value = parseFloat(input.value.replace(/,/g, '')) || 0;
            if (value > 0) {
                input.value = formatIndianNumber(value);
            }
        }
        
        function removeCommas(input) {
            input.value = input.value.replace(/,/g, '');
        }
        
        function calculate() {
            const total = parseFloat(document.getElementById('totalAmount').value.replace(/,/g, ''));
            const members = parseInt(document.getElementById('members').value);
            const months = parseInt(document.getElementById('months').value);
            const bid = parseFloat(document.getElementById('bidAmount').value.replace(/,/g, ''));
            
            if (!total || !members || !months || bid === undefined) {
                document.getElementById('result').innerHTML = 'Please fill all fields';
                return;
            }
            
            const monthly = total / months;
            const winnerGets = total - bid;
            const dividend = bid / (members - 1);
            const netPayment = monthly - dividend;
            
            document.getElementById('result').innerHTML = `
                <strong>Results:</strong><br>
                Monthly Contribution: ₹${monthly.toLocaleString()}<br>
                Winner Receives: ₹${winnerGets.toLocaleString()}<br>
                Dividend per Member: ₹${dividend.toLocaleString()}<br>
                Net Payment per Member: ₹${netPayment.toLocaleString()}
            `;
        }
    </script>
</body>
</html>